const ROOT=document.querySelector("#app"),STYLE=document.querySelector("style");async function useGetModules(e){let t;try{t=await import(`${e}`).then((e=>e.default))}catch(e){}return t}async function useApi(e,t,n){try{const a=await fetch(e,t);let r;return"text"===n?r=await a.text():"json"===n&&(r=await a.json()),r}catch{return null}}function useLocalStorage(e,t,n){if("getItem"===e)return JSON.parse(window.localStorage.getItem(t));if("setItem"===e)window.localStorage.setItem(t,JSON.stringify(n));else if("setItems"===e){const e=JSON.parse(localStorage.getItem(t)||"[]");e.push(n),localStorage.setItem(t,JSON.stringify(e))}}async function useLocation(){try{const{latitude:e,longitude:t}=await async function(){return new Promise(((e,t)=>{if(navigator.geolocation)navigator.geolocation.getCurrentPosition((t=>{const n=t.coords.latitude,a=t.coords.longitude;e({latitude:n,longitude:a})}),(e=>{t(e)}));else{const e=new Error("Geolocation is not supported by this browser.");t(e)}}))}();return[e,t]}catch(e){return[null,null]}}async function useNavigate(e,t){history.pushState(null,null,e),Router(t)}async function useId(e){try{const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),a=Array.from(new Uint8Array(n));return a.map((e=>e.toString(16).padStart(2,"0"))).join("")}catch(e){throw new Error("Erro ao criptografar a senha: "+e)}}function useSearch(e){try{const t=window.location,n=t[e];return decodeURIComponent(n)||t}catch(e){throw e}}async function useCSVToJSON(e,t){const n=await fetch(e,{headers:{ct:t}}),a=(await n.text()).split("\n"),r=a[0].split(";");return a.slice(1).map((e=>e.split(";").reduce(((e,t,n)=>{const a={};return a[r[n]]=t,{...e,...a}}),{})))}function useJSONToCSV(e,t){return[t.join(","),...e.map((e=>t.map((t=>e[t]||"")).join(",")))].join("\n")}function useExeFucTemp(e,t){setTimeout((function(){e()}),t||1)}function useCSS(e,t){document.querySelectorAll(e).forEach((e=>{Object.keys(t).forEach((n=>{e.style[n]=t[n]}))}))}function $$(e,t){if("string"==typeof e)return t&&(document.querySelector(e).innerHTML=t),document.querySelector(e);if(Array.isArray(e)){e.forEach(((e,t)=>{const n=Object.keys(e)[0],a=Object.values(e)[0],r=document.querySelectorAll(n);return r.forEach((e=>{for(const[t,n]of Object.entries(a))"innerHTML"===t?e.innerHTML=n:e.setAttribute(t,n)})),r}));const t=document.querySelectorAll(e.map((e=>Object.keys(e)[0])).join(", "));return t.length>1?t:t[0]}}const $=e=>{const t=document.querySelectorAll(e);if(0===t.length)return e;const n={addClass:e=>(t.forEach((t=>{t.classList.add(e)})),n),removeClass:e=>(t.forEach((t=>{t.classList.remove(e)})),n),text:e=>(t.forEach((t=>{t.textContent=e})),n),css:e=>(t.forEach((t=>{Object.assign(t.style,e)})),n),on:(e,a)=>(t.forEach((t=>{t.addEventListener(e,a)})),n),appendImage:e=>(t.forEach((t=>{const n=document.createElement("img");n.src=e,t.appendChild(n)})),n),hide:()=>(t.forEach((e=>{e.style.originalDisplay=e.style.display,e.style.display="none"})),n),show:()=>(t.forEach((e=>{e.style.display=e.style.originalDisplay||"",delete e.style.originalDisplay})),n),tag:()=>t[0],tags:()=>t};return n},Router=async(e={},t={})=>{const n=document.querySelector("#app"),[a,r,o]=Object.values(e),c=new Map,s=async e=>{let a=[];const s=async(e,n)=>{let c;t.VDOM&&(c=document.createElement(`${e.tagName.toLowerCase()}-${n}`),e.replaceWith(c),Array.from(e.attributes).forEach((e=>{e.name.startsWith("data-")||c.setAttribute(e.name,e.value)})));const s=Array.from(e.attributes).filter((e=>e.name.startsWith("data-"))).reduce(((e,t)=>(e[t.name.replace("data-","")]=t.value,e)),{}),i={reference:n,nameTag:e.tagName.toLowerCase()||(c?c.tagName.toLowerCase():""),key:e.tagName.toLowerCase()||(c?c.tagName.toLowerCase():""),attributes:s,parameter:Object.fromEntries(new URLSearchParams(location.href.split("?")[1]).entries()),page:location.hash.replace("#","").match(/^\/(\w+)(\/)?/),content:e.innerText,data:o,tag:e},{html:u,state:l}=await r[i.nameTag](i);t.VDOM?("function"==typeof u&&(c.innerHTML+=u()),"function"==typeof l&&a.push(l)):("function"==typeof u&&(e.innerHTML+=u()),"function"==typeof l&&l())},i=async t=>{n.innerHTML="",n.innerHTML=t.innerHTML,a.forEach((e=>e())),"function"==typeof e.renderState&&e.renderState(),(async()=>{document.querySelectorAll("[data-url-src]").forEach((async e=>{const t=e.dataset.urlSrc;if(c.has(t))e.src=c.get(t);else try{const n=await fetch(t);if(n.ok){const a=await n.blob(),r=URL.createObjectURL(a);c.set(t,r),e.src=r}}catch(e){}}))})()};await(async()=>{const n=(()=>{if(void 0===e.renderedHtml)return document.querySelector("#app");const t=document.createElement("div");return t.insertAdjacentHTML("beforeend",e.renderedHtml),t})(),a=[...n.querySelectorAll("*")].filter((e=>e.tagName.toLowerCase().match(/^comp-/i)));await(async e=>{const n=e.map(s);await Promise.all(n),t.VDOM})(a),t.VDOM?i(n):"function"==typeof e.renderState&&e.renderState()})()},i=e=>{document.querySelector("style").innerHTML=e};async function u(){const e=(()=>{const e=location.hash.replace("#","")||location.pathname;return"/"===e?Object.keys(a)[0]:e.split("#")[0].split("/").filter(Boolean).pop()})(),c=e&&a[e]?e:"erro";if("erro"===c);else{const e={Pages:a,Components:r,Data:o,styles:i},{html:u,state:l}=await a[c](e),d="function"==typeof u?u():await a[c](),f="function"==typeof l?l:void 0;console,!0===t.VDOM?s({renderedHtml:d,renderState:f}):(n.innerHTML=u(),s({renderState:f}))}}window.addEventListener("popstate",u),document.body.addEventListener("click",function(e,t){let n;return function(...a){clearTimeout(n),n=setTimeout((()=>{e.apply(this,a)}),t)}}((function(e){if(e.target.matches("[data-href]")){e.preventDefault();const t=e.target.dataset.href;history.pushState(null,null,t),u()}}),200)),u()};export{useLocalStorage,useApi,useGetModules,useSearch,useExeFucTemp,useId,useLocation,useCSVToJSON,useJSONToCSV,useNavigate,useCSS,$,Router,$$};